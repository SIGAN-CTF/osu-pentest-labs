from api.models import Lab
from sqlalchemy.orm import Session

def add_lab(db: Session, lab: Lab):
    db.add(lab)
    db.commit()
    db.refresh(lab)

def add_all(db: Session, labs):
    db.add_all(labs)
    db.commit()
    for l in labs:
        db.refresh(l)
    #todo distinct

def get_lab(db: Session, id: int):
    return db.query(Lab).filter(Lab.id == id).first()#что вернёт если такого id нет

def get_all_labs(db :Session):
    labs = db.query(Lab).all()
    return labs.sort(key=lambda x: x.name)

def del_lab(db: Session, id: int):
    lab = db.query(Lab).filter(Lab.id == id).first()
    db.delete(lab)
    db.commit()

    
